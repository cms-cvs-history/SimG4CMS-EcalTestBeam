process EcalTBAnalysis  = 
	    {

            source = PoolSource { 
        	untracked vstring fileNames = {'file:ecal_TB_simout.root'}
          	untracked int32 maxEvents = -1
          	untracked uint32 debugVebosity = 10
          	untracked bool   debugFlag     = true
		}

        #Geometry
        #
        include "Geometry/EcalTestBeam/data/cmsEcalIdealTBGeometryXML.cfi"
        #include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"  

        es_module = EcalBarrelGeometryEP {}        
        es_module = EcalEndcapGeometryEP {}        
        es_module = EcalPreshowerGeometryEP {}        
        es_module = HcalHardcodeGeometryEP {}      
        es_module = CaloTowerHardcodeGeometryEP {} 
        es_module = CaloGeometryBuilder {}         
 
        module ecalHitsValidation =  EcalSimHitsTask {
        untracked string moduleLabelMC = 'FlatRandomEGunSource' 
    	untracked string moduleLabelTk = 'SimG4Object' 
	    untracked string moduleLabelVtx = 'SimG4Object' 
        untracked string outputFile = 'EcalSimHitsTBValidation.root'
        untracked bool verbose = true
        }

        module ecalDigisValidation =  EcalDigisValidation {
		untracked string moduleLabelMC = 'FlatRandomEGunSource' 
		untracked string moduleLabelTk = 'SimG4Object' 
		untracked string moduleLabelVtx = 'SimG4Object' 
        untracked string outputFile = 'EcalDigisTBValidation.root'
        untracked bool verbose = true
		}
                                  
        module ecalBarrelDigisValidation = EcalBarrelDigisValidation{ untracked bool verbose = true }                                  
                                              
		path p1 = { ecalHitsValidation, ecalDigisValidation, ecalBarrelDigisValidation }

        service = MessageLogger { } 
                                                                                
        service = DaqMonitorROOTBackEnd{ }
	}		
